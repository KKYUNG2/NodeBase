# CSRF 란?
CSRF는 사용자가 의도치 않게 공격자가 의도한 행동을 하게 만드는, 쿠키를 통한 인증방식에서 사용되는 공격기법이다.
예를 들어 특정 페이지에 방문할 때 저절로 로그아웃되거나, 게시글이 써지는 현상을 유도하는 것을 말한다.
심지어 은행과 같은 사이트에서는 다른 사람에게 송금하는 행동을 넣는 등 상황에 따라 크게 악용 될 수 있는 공격이다.

# CSRF 공격 과정
만일 티켓 예약 서비스인 http://ttticketttt.org/ 에서 이용자가 티켓을 구매했다고 가정하자.
만일 이용자의 유저 쿠키가 탈취됬을경우, 공격자는 다음과 같이 이미지 태그안에 공격코드를 작성하여 이용자에게 보낸다.

<img src="http://ttticketttt.org/ticket-cancel/?user_id=134"> (예매한 티켓을 취소하는 GET 요청 url)

이용자가 공격용 페이지를 열면, 브라우저는 이미지 파일을 받아오기 위해 공격용 URL을 열게 된다.
이용자는 의도치 않게 실행하는 순간 브라우저에서 요청을 보내서 공격이 실행되어 구매한 티켓이 취소되는 상황을 겪게 된다.

따라서 이 공격을 막으려면 내가 한 행동(티켓 구매)이 내가 한 것이 맞다는 점을 인증해야 한다.

이때 CSRF 토큰이 사용되며, csurf 모듈은 이 토큰을 쉽게 발급하거나 검증할 수 있도록 도와 준다.

csurf 모듈은 CSRF Secret와 CSRF Token을 만들어서 서로 매칭이 되는지 확인하는 기능을 손쉽게 제공하는 식으로, 보통 CSRF Secret는 session/cookie에 저장하고 CSRF Token은 POST body에 저장한다.


출처 : https://inpa.tistory.com/entry/NODE-%EB%B3%B4%EC%95%88-%F0%9F%93%9A-csurf-%EB%AA%A8%EB%93%88-%EC%82%AC%EC%9A%A9%EB%B2%95